<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Kauhasen laskin</title>
  </head>
  <body>

<!-- Display elements:  rect as the output display, root as the number panel container-->
<!--div id = "rect"></div-->
<div id = "rect"></div>
<div id="root"></div>

<!-- react, react-dom and in-browser babel interpreter-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react-dom.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>

<!-- first script: creating the number panel && math operations-->
<script type="text/babel">
class NumberPanel extends React.Component {

    
    render() {
      
      //strings for collecting the input data
      let str1 = '';
      let str2 = '';
      
      let activeStr = "str_1";
      
      let buttonWidth = 80;
      let buttonHeight = 80;
      
      let minusButtonPushed;
      let plusButtonPushed;
      let timesButtonPushed;
      let dividerButtonPushed;
      let equButtonPushed;
    
    
    
      function updateDisp(input){
        let ta = document.getElementById("outputtext");
        ta.innerHTML = input;
      }
      
      function c1(){
        if(activeStr == "str_1"){
          str1 +='1';
          updateDisp(str1);
          
          }
          else{
            str2+= '1';
            updateDisp(str2);
        }
        
      }
      
        function c2(){
          if(activeStr == "str_1"){
            str1 +='2';
            updateDisp(str1);
          }
          else{
            str2+= '2';
            updateDisp(str2);
          }
        
      }
      
        function c3(){
          if(activeStr == "str_1"){
            str1 +='3';
            updateDisp(str1);
          }
          else{
            str2+= '3';
            updateDisp(str2);
          }
        
      }
      
        function c4(){
          if(activeStr == "str_1"){
            str1 +='4';
            updateDisp(str1);
          }
        else{
          str2+= '4';
          updateDisp(str2);
        }
        
      }
      
      function c5(){
        if(activeStr == "str_1"){
          str1 +='5';
          updateDisp(str1);
        }
        else{
          str2+= '5';
          updateDisp(str2);
        }
        
      }
      
      function c6(){
        if(activeStr == "str_1"){
          str1 +='6';
          updateDisp(str1);
        }
        else{
          str2+= '6';
          updateDisp(str2);
        }
        
      }
      
      function c7(){
        if(activeStr == "str_1"){
          str1 +='7';
          updateDisp(str1);
        }
        else{
          str2+= '7';
          updateDisp(str2);
        }
        
      }
      
      function c8(){
        if(activeStr == "str_1"){
          str1 +='8';
          updateDisp(str1);
        }
        else{
          str2+= '8';
          updateDisp(str2);
        }
        
      }
      
      function c9(){
        if(activeStr == "str_1"){
          str1 +='9';
          updateDisp(str1);
        }
        else{
          str2+= '9';
          updateDisp(str2);
        }
        
      }
      
      function c0(){
        if(activeStr == "str_1"){
          str1 +='0';
          updateDisp(str1);
        }
        else{
          str2+= '0';
          updateDisp(str2);
        }
        
      }


      function CE(){
        updateDisp(0);
      }
      
      function ClearOutput(){
        str1 = '';
        str2 = '';
        activeStr = "str_1";
      }
      
      function equals(){
        
        let int_1 = parseInt(str1);
        let int_2 = parseInt(str2);
        let res = 0;
        
        if(minusButtonPushed){
              res = int_1 - int_2;
              
              updateDisp(res);
              
              str1 = '';
              str2 = '';
              minusButtonPushed = 0;
              ClearOutput();
        }
        
        if(plusButtonPushed){
            res = int_1 + int_2;
            
            updateDisp(res);
            
            str1 = '';
            str2 = '';
            plusButtonPushed = 0;
            ClearOutput();
        }
        
        if(timesButtonPushed){
          res = int_1 * int_2;
          
          updateDisp(res);
          
          str1 = '';
          str2 = '';
          timesButtonPushed = 0;
          ClearOutput();
        }
        
        if(dividerButtonPushed){
          
          if(int_2 === 0){
            alert("Ei kovin mielellään");
            ClearOutput();
            
            updateDisp("Math error");
            return;
          }
          else{
            res = int_1 / int_2;
            
            updateDisp(res);
            str1 = '';
            str2 = '';
          }
          dividerButtonPushed = 0;
          ClearOutput();
        }
        }
        
        function plus(){
          plusButtonPushed = 1;
          minusButtonPushed = 0;
          timesButtonPushed = 0;
          dividerButtonPushed = 0;
          
          activeStr = "str2";
        }
        
        function minus(){
          plusButtonPushed = 0;
          minusButtonPushed = 1;
          timesButtonPushed = 0;
          dividerButtonPushed = 0;
          
          activeStr = "str2";
        }
        
      function times(){
          plusButtonPushed = 0;
          minusButtonPushed = 0;
          timesButtonPushed = 1;
          dividerButtonPushed = 0;
          
          activeStr = "str2";
        }
      
      function divide(){
          plusButtonPushed = 0;
          minusButtonPushed = 0;
          timesButtonPushed = 0;
          dividerButtonPushed = 1;
          
          activeStr = "str2";
        }
        
      
        return (
        
        <div>
        {/* buttons 7-9 */}
        <button onClick={c7} style={{height: buttonHeight, width: buttonWidth, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>7</button>
        <button onClick={c8} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>8</button>
        <button onClick={c9} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>9</button>
        <button onClick = {CE} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>CE</button><br/>
        
        {/* buttons 4-6 */}
        <button onClick={c4} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>4</button>
        <button onClick={c5} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>5</button>
        <button onClick={c6} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>6</button>
        <button onClick={plus} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>+</button><br/>
        
        {/* buttons 1-3 */}
        <button onClick={c1} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>1</button>
        <button onClick={c2} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>2</button>
        <button onClick={c3} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>3</button>
        <button onClick={minus} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 1200, backgroundColor: 'silver'}}>-</button><br/>
        
        {/* buttons *, 0, / */}
        <button onClick={times} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>*</button>
        <button onClick={c0} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>0</button>
        <button onClick={divide} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>/</button>
        <button onClick = {equals} style={{height: buttonHeight, width: buttonHeight, borderRadius: '4px', fontWeight: 'bold', backgroundColor: 'silver'}}>=</button><br/>
        <p>{str1}</p>
        

        </div>
        );
    }
}

ReactDOM.render(
    <NumberPanel />,document.getElementById('root')
);
</script>

<!-- Second script: creating the display rectangle -->
<script type="text/babel">
  class DisplayRectangle extends React.Component{
  
  render(){
  
    
    return(
    <div>
       <svg width="340" height="110">
        <rect id ="output"  width="320" height="110" style={{fill: 'blue', border: '2px'}}>
        </rect>
        <text id = "outputtext" x="20" y="90" fontFamily="Arial" fontSize="30" fill="white" ></text>
      </svg>
    </div>
      );
    
    }  
  }
  
    ReactDOM.render(<DisplayRectangle/>, document.getElementById('rect'));
</script>

  </body>
</html>